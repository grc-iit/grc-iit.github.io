"use strict";(self.webpackChunkgnosis=self.webpackChunkgnosis||[]).push([[8626],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var l=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},i=Object.keys(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=l.createContext({}),s=function(e){var t=l.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=s(e.components);return l.createElement(u.Provider,{value:t},e.children)},k="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},p=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),k=s(n),p=a,d=k["".concat(u,".").concat(p)]||k[p]||c[p]||i;return n?l.createElement(d,r(r({ref:t},m),{},{components:n})):l.createElement(d,r({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=p;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o[k]="string"==typeof e?e:a,r[1]=o;for(var s=2;s<i;s++)r[s]=n[s];return l.createElement.apply(null,r)}return l.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3516:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var l=n(7462),a=(n(7294),n(3905));const i={},r="Buffering Target",o={unversionedId:"hermes/components/buffering-target",id:"hermes/components/buffering-target",title:"Buffering Target",description:"A buffering target represents a logical target of data placement, i.e.,",source:"@site/docs/03-hermes/06-components/03-buffering-target.md",sourceDirName:"03-hermes/06-components",slug:"/hermes/components/buffering-target",permalink:"/docs/hermes/components/buffering-target",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Buffer Pool",permalink:"/docs/hermes/components/buffer-pool"},next:{title:"Data Placement",permalink:"/docs/hermes/components/data-placement"}},u={},s=[{value:"Terminology",id:"terminology",level:2},{value:"Virtual Device",id:"virtual-device",level:3},{value:"NodeID",id:"nodeid",level:3},{value:"User View",id:"user-view",level:2},{value:"Goals",id:"goals",level:2},{value:"Charateristics",id:"charateristics",level:2},{value:"Example",id:"example",level:2},{value:"Kitchen Sink",id:"kitchen-sink",level:2}],m={toc:s},k="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(k,(0,l.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"buffering-target"},"Buffering Target"),(0,a.kt)("p",null,"A buffering target represents a logical target of data placement, i.e.,\nparts of or a full BLOB can be placed there by the DPE. Buffering\ntargets are logical constructs that are statically mapped by Hermes to\nunderlying physical resources."),(0,a.kt)("h2",{id:"terminology"},"Terminology"),(0,a.kt)("p",null,"A buffering target consists of two components:"),(0,a.kt)("h3",{id:"virtual-device"},"Virtual Device"),(0,a.kt)("p",null,"This represents a way to get to the actual storage. It could be a file handle and an offset, a memory address, a partition of a drive, etc."),(0,a.kt)("h3",{id:"nodeid"},"NodeID"),(0,a.kt)("p",null,"The identifier of the node that is responsible for the virtual device."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Tiers"),' are the partitions of a partitioned set of targets order by a\nscore, which is calculated based on a set of prioritized\ncharacteristics. Tier 1 represents the "best" targets according to the\nprioritized characteristics, and the tiers get "worse" as the tier\nnumber increases. For example, tier 1 might be a local RAM target when\nbandwidth is the ordering characteristic, but it might be a burst buffer\ntarget when remaining capacity is prioritized.'),(0,a.kt)("p",null,"When the DPE runs, it is given an appropriate list of targets. If a\nplacement fails, it can request an extended list of targets\n(neighborhood or global)."),(0,a.kt)("p",null,"For now we map 1 ",(0,a.kt)("inlineCode",{parentName:"p"},"TargetID")," to 1 (NodeID, VirtualDevice) pair, but the\noption is open for 1 to ",(0,a.kt)("em",{parentName:"p"},"n")," and ",(0,a.kt)("em",{parentName:"p"},"n")," to ",(0,a.kt)("em",{parentName:"p"},"m"),"."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"The set of targets can be partitioned in the form of ",(0,a.kt)("em",{parentName:"p"},"topologies"),". In\nsome cases, the aggregate characteristics of such partitions can be\ndefined based on the characteristics of the underlying targets."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"user-view"},"User View"),(0,a.kt)("p",null,"Buffering targets are exposed in the [","[Hermes Configuration]","] file as the variables ",(0,a.kt)("inlineCode",{parentName:"p"},"num_targets")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"num_devices"),". Currently, the number of targets must equal the number of devices."),(0,a.kt)("h2",{id:"goals"},"Goals"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Provide a way for the DPE to operate on a reduced (or custom) set of\nresources."),(0,a.kt)("li",{parentName:"ul"},"Remove certain resources from DPE consideration."),(0,a.kt)("li",{parentName:"ul"},"Create orderings of resources based on characteristics (i.e., tiered\ngroups).")),(0,a.kt)("h2",{id:"charateristics"},"Charateristics"),(0,a.kt)("p",null,"Each buffering target has the following characteristics."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Targets $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i, i=1,\\ldots,D"),"$",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Target configuration/specs.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Cap[d_i]"),"$ - the total capacity of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Wbw[d_i]"),"$ - the HW max. write bandwidth of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Rbw[d_i]"),"$ - the HW max. read bandwidth of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Alat[d_i]"),"$ - the average HW access latency of target\n$",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$ (measured as time)"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Pwr[d_i]"),"$ - the energy consumption of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$\n(measured in Watts)"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Concy[d_i]"),"$ - the HW concurrency of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$\n(measured in lane count)"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"End[d_i]"),"$ - the endurance (wear and tear) of target\n$",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$ (measured as percentage of the expected storage\ncycles over the life time)"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Rrat[d_i]"),"$ - the reliability rating of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$\n(measured as test-retest reliability)"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Speed[d_i]"),"$ - the average I/O speed of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$\n(measured as MB/s)"))),(0,a.kt)("li",{parentName:"ul"},"Variables",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Avail[d_i]"),"$ - the availability of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$\n(Boolean)"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Rem[d_i]"),"$ - the remaining capacity of target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$"),(0,a.kt)("li",{parentName:"ul"},"$",(0,a.kt)("inlineCode",{parentName:"li"},"Load[d_i]"),"$ - the expected completion time of outstanding\nrequests on target $",(0,a.kt)("inlineCode",{parentName:"li"},"d_i"),"$")))))),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)("p",null,"Assume a system with 3 nodes, each with three targets (RAM, NVMe, and\nburst buffer). Assume a neighborhood is any 2 of the three nodes. This\nmeans a local target list will consist of 3 targets, a neighborhood target list of\n6, and the global target list of 9."),(0,a.kt)("h2",{id:"kitchen-sink"},"Kitchen Sink"),(0,a.kt)("table",null,(0,a.kt)("tbody",null,(0,a.kt)("tr",{class:"odd"},(0,a.kt)("td",null,(0,a.kt)("p",null,"From the ",(0,a.kt)("a",{href:"https://www.cut.ac.cy/digitalAssets/122/122275_100sigmod.pdf"},"OctopusFS paper"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",null,"Tiers ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"T"),(0,a.kt)("sub",null,"1"),",\u2006\u2026,\u2006",(0,a.kt)("em",null,"T"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"k")))),(0,a.kt)("li",null,"Media ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i"))),(0,a.kt)("ul",null,(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"T"),(0,a.kt)("em",null,"i"),(0,a.kt)("em",null,"e"),(0,a.kt)("em",null,"r"),"[",(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"]")," - the tier of medium ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")))),(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"C"),(0,a.kt)("em",null,"a"),(0,a.kt)("em",null,"p"),"[",(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"]")," - the total capacity of medium ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")))),(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"R"),(0,a.kt)("em",null,"e"),(0,a.kt)("em",null,"m"),"[",(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"]")," - the remaining capacity of medium ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")))),(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"N"),(0,a.kt)("em",null,"r"),(0,a.kt)("em",null,"C"),(0,a.kt)("em",null,"o"),(0,a.kt)("em",null,"n"),(0,a.kt)("em",null,"n"),"[",(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"]")," - the number of active I/O connections to medium ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")))),(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"W"),(0,a.kt)("em",null,"T"),(0,a.kt)("em",null,"h"),(0,a.kt)("em",null,"r"),(0,a.kt)("em",null,"u"),"[",(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"]")," - the sustained write throughput of medium ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")))),(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"R"),(0,a.kt)("em",null,"T"),(0,a.kt)("em",null,"h"),(0,a.kt)("em",null,"r"),(0,a.kt)("em",null,"u"),"[",(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"]")," - the sustained read throughput of medium ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"m"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")))))),(0,a.kt)("li",null,"Workers ",(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"W"),(0,a.kt)("sub",null,"1"),",\u2006\u2026,\u2006",(0,a.kt)("em",null,"W"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"n"))),(0,a.kt)("ul",null,(0,a.kt)("li",null,"Slightly different concept",(0,a.kt)("ul",null,(0,a.kt)("li",null,"Stores and manages file blocks on storage media"),(0,a.kt)("li",null,"Serves read and write requests from clients"),(0,a.kt)("li",null,"Block creation, deletion, replication (instructed by name nodes HDFS...)"))))))),(0,a.kt)("td",null,(0,a.kt)("p",null,"From ",(0,a.kt)("a",{href:"https://www.wrike.com/open.htm?id=416733774"},"Wrike"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",null,(0,a.kt)("span",{class:"math inline"},(0,a.kt)("em",null,"W"),(0,a.kt)("sub",null,(0,a.kt)("em",null,"i")),"\u2004=\u2004\u2004<\u2004",(0,a.kt)("em",null,"n"),(0,a.kt)("em",null,"o"),(0,a.kt)("em",null,"d"),(0,a.kt)("em",null,"e"),",\u2006",(0,a.kt)("em",null,"t"),(0,a.kt)("em",null,"i"),(0,a.kt)("em",null,"e"),(0,a.kt)("em",null,"r"),">")),(0,a.kt)("li",null,"Workers are a dedicated thread per tier available on the node"),(0,a.kt)("li",null,"Worker characteristics:",(0,a.kt)("ul",null,(0,a.kt)("li",null,"Capacity"),(0,a.kt)("li",null,"BW"),(0,a.kt)("li",null,"Latency"),(0,a.kt)("li",null,"Energy consumption"),(0,a.kt)("li",null,"Concurrency (expressed as the number of lanes of the bus e.g., PCIex8 or SATA)"),(0,a.kt)("li",null,"Queue pressure (outstanding requests)",(0,a.kt)("ul",null,(0,a.kt)("li",null,"Aggregate data size in queue"),(0,a.kt)("li",null,"Number of pending requests")))))))))))}c.isMDXComponent=!0}}]);