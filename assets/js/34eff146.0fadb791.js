"use strict";(self.webpackChunkgrc=self.webpackChunkgrc||[]).push([[8758],{9493:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"iowarp/index","title":"IoWarp","description":"IoWarp is a powerful cutting-edge data management platform designed to streamline and accelerate scientific workflows, especially those intensified by the rise of artificial intelligence (AI). It optimizes data flow throughout the research process, ensuring efficient handling of diverse data types, formats, and the exponential growth of data. IOWarp aims to significantly reduce data access times, accelerate the pace of scientific discovery, and foster a collaborative research environment.","source":"@site/docs/07-iowarp/01-index.md","sourceDirName":"07-iowarp","slug":"/iowarp/index","permalink":"/docs/iowarp/index","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"FAQ","permalink":"/docs/ares/faq"},"next":{"title":"Hermes SHM","permalink":"/docs/iowarp/shared-memory/index"}}');var r=i(4848),a=i(8453);const s={},t="IoWarp",l={},c=[{value:"Dependencies",id:"dependencies",level:2},{value:"Install Spack",id:"install-spack",level:3},{value:"Clone the IoWarp Spack Repo",id:"clone-the-iowarp-spack-repo",level:3},{value:"Install IOWARP: USERS",id:"install-iowarp-users",level:2},{value:"Install IOWARP: DEVS",id:"install-iowarp-devs",level:2},{value:"Project Environment",id:"project-environment",level:3},{value:"Clone the repos",id:"clone-the-repos",level:3},{value:"Option 1: Install Dependencies on Native Machine",id:"option-1-install-dependencies-on-native-machine",level:3},{value:"Option 2: Use Docker to Install Dependencies",id:"option-2-use-docker-to-install-dependencies",level:3},{value:"For Pull Requests",id:"for-pull-requests",level:3},{value:"Load Basic Packages",id:"load-basic-packages",level:3},{value:"Things failing to build after an update",id:"things-failing-to-build-after-an-update",level:3},{value:"Hermes-SHM",id:"hermes-shm",level:3},{value:"IoWarp Runtime: Chimaera",id:"iowarp-runtime-chimaera",level:3},{value:"Content-Transfer-Engine: Hermes",id:"content-transfer-engine-hermes",level:3},{value:"Another note on environments",id:"another-note-on-environments",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"iowarp",children:"IoWarp"})}),"\n",(0,r.jsx)(n.p,{children:"IoWarp is a powerful cutting-edge data management platform designed to streamline and accelerate scientific workflows, especially those intensified by the rise of artificial intelligence (AI). It optimizes data flow throughout the research process, ensuring efficient handling of diverse data types, formats, and the exponential growth of data. IOWarp aims to significantly reduce data access times, accelerate the pace of scientific discovery, and foster a collaborative research environment."}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Currently, IoWarp is Linux-only. We are working on extending portability."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://spack.io/",children:"Spack"})," is the easiest way to install iowarp as of right now."]}),"\n",(0,r.jsx)(n.h3,{id:"install-spack",children:"Install Spack"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'cd ${HOME}\ngit clone https://github.com/spack/spack.git\ncd spack\ngit checkout tags/v0.22.2\necho ". ${PWD}/share/spack/setup-env.sh" >> ~/.bashrc\nsource ~/.bashrc\n'})}),"\n",(0,r.jsx)(n.h3,{id:"clone-the-iowarp-spack-repo",children:"Clone the IoWarp Spack Repo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${HOME}\ngit clone https://github.com/iowarp/iowarp-install.git\nspack repo add iowarp-install/iowarp-spack\n"})}),"\n",(0,r.jsx)(n.h2,{id:"install-iowarp-users",children:"Install IOWARP: USERS"}),"\n",(0,r.jsx)(n.p,{children:"For general users of IOWARP, use the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"spack install iowarp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"install-iowarp-devs",children:"Install IOWARP: DEVS"}),"\n",(0,r.jsx)(n.h3,{id:"project-environment",children:"Project Environment"}),"\n",(0,r.jsx)(n.p,{children:"Decide on where you want to place your iowarp repos.\nThis guide will assume you have set a variable named IOWARP_PKGS."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'export IOWARP_PKGS="${HOME}"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Set IOWARP_PKGs to where you want your packages."}),"\n",(0,r.jsxs)(n.p,{children:["NOTE: This variable needs to be reset for every new terminal.\nOn Linux, you could add the above command to your ",(0,r.jsx)(n.code,{children:"~/.bashrc"}),"\nto automate."]}),"\n",(0,r.jsx)(n.h3,{id:"clone-the-repos",children:"Clone the repos"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}\ngit clone https://github.com/iowarp/cte-hermes-shm.git\ngit clone https://github.com/iowarp/iowarp-runtime\ngit clone https://github.com/iowarp/content-transfer-engine.git\n"})}),"\n",(0,r.jsxs)(n.p,{children:["IoWarp has three main repos actively developed right now. For\nthe ones you are contributing to, fork them first and replace\nthe ",(0,r.jsx)(n.code,{children:"git clone"})," urls above with your personal fork."]}),"\n",(0,r.jsx)(n.h3,{id:"option-1-install-dependencies-on-native-machine",children:"Option 1: Install Dependencies on Native Machine"}),"\n",(0,r.jsx)(n.p,{children:"IoWarp is currently only compatible with Linux. This\nsection is for those who plan to develop iowarp on\ntheir Linux machine."}),"\n",(0,r.jsx)(n.p,{children:"To install iowarp dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"spack install iowarp +nocompile\n"})}),"\n",(0,r.jsx)(n.p,{children:"For developer installations, we will use a tool named scspkg.\nscspkg is installed automatically by iowarp. It is a tool for\nmanaging modulefiles, which set various environment variables\nthat streamline the installation of our tools."}),"\n",(0,r.jsx)(n.h3,{id:"option-2-use-docker-to-install-dependencies",children:"Option 2: Use Docker to Install Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"For those that don't want to install Linux or would rather not\nmess with their environment, we maintain a development container.\nWe provide an Ubuntu contianer where iowarp's dependencies are\nalready installed."}),"\n",(0,r.jsx)(n.p,{children:"Here is the docker compose:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"services:\n  iowarp:\n    image: lukemartinlogan/chimaera-deps:latest\n    container_name: iowarp  \n    shm_size: 8g\n    mem_limit: 8g\n    volumes:\n      - ~/.ssh:/root/.ssh\n      - ${IOWARP_PKGS}/cte-hermes-shm:/cte-hermes-shm\n      - ${IOWARP_PKGS}/iowarp-runtime:/iowarp-runtime\n      - ${IOWARP_PKGS}/content-transfer-engine:/content-transfer-engine\n    stdin_open: true\n    tty: true\n    network_mode: host\n"})}),"\n",(0,r.jsx)(n.p,{children:"To launch container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ${IOWARP_PKGS}/docker/develop\ncd ${IOWARP_PKGS}/docker/develop\ntouch ${IOWARP_PKGS}/docker/develop/docker-compose.yml\n# Copy-paste the above into the file\ndocker compose up -d  # Only for recent dockers\ndocker-compose up -d  # Only for older dockers\n"})}),"\n",(0,r.jsx)(n.p,{children:"To interact with the container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it iowarp bash\n"})}),"\n",(0,r.jsx)(n.p,{children:"To stop container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/docker/develop\ndocker compose down  # Only for recent dockers\ndocker-compose down  # Only for older dockers\n"})}),"\n",(0,r.jsxs)(n.p,{children:["NOTE: ",(0,r.jsx)(n.code,{children:"shm_size"})," and ",(0,r.jsx)(n.code,{children:"mem_limit"})," are set to 8GB. Feel free to increase or decrease\nthat value."]}),"\n",(0,r.jsx)(n.h3,{id:"for-pull-requests",children:"For Pull Requests"}),"\n",(0,r.jsxs)(n.p,{children:["You may find the github ",(0,r.jsx)(n.a,{href:"https://cli.github.com/",children:"command line"})," useful for making PRs."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'gh auth login\ngh repo set-default\ngh pr create --title "Your pull request title" --body "Your pull request description"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"load-basic-packages",children:"Load Basic Packages"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"spack load iowarp\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Make sure to understand your environment. If you get errors\nlike ",(0,r.jsx)(n.code,{children:"package X was not found"}),", it is most likely you forgot\nto do either ",(0,r.jsx)(n.code,{children:"spack load X"})," or ",(0,r.jsx)(n.code,{children:"module load X"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"things-failing-to-build-after-an-update",children:"Things failing to build after an update"}),"\n",(0,r.jsx)(n.p,{children:"If you find that things are failing to build for you\nafter an update, try destroying all build directories."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/cte-hermes-shm\nrm -rf build\ncd ${IOWARP_PKGS}/iowarp-runtime\nrm -rf build\ncd ${IOWARP_PKGS}/content-transfer-engine\nrm -rf build\n"})}),"\n",(0,r.jsx)(n.h3,{id:"hermes-shm",children:"Hermes-SHM"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/cte-hermes-shm\nscspkg create hermes_shm\nmkdir build\ncd build\ncmake ../ \\\n-DCMAKE_INSTALL_PREFIX=$(scspkg pkg root hermes_shm) \\\n-DHSHM_ENABLE_COMPRESS=ON \\\n-DHSHM_ENABLE_ENCRYPT=ON \\\n-DHSHM_RPC_THALLIUM=ON \\\n-DHSHM_USE_ELF=ON\nmake -j32 install\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you will be working on hermes-shm, create your own personal\nfork instead of cloning directly. The following will allow\nyou to keep your fork updated with changes to the global repo."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/cte-hermes-shm\ngit remote add iowarp https://github.com/iowarp/cte-hermes-shm.git\ngit pull iowarp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"iowarp-runtime-chimaera",children:"IoWarp Runtime: Chimaera"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/iowarp-runtime\nscspkg create iowarp_runtime\nmodule unload iowarp_runtime\nmodule load hermes_shm  \nmkdir build\ncd build\ncmake ../ \\\n-DCMAKE_INSTALL_PREFIX=$(scspkg pkg root iowarp_runtime)\nmake -j32 install\n"})}),"\n",(0,r.jsx)(n.p,{children:"NOTE: If you will be working on iowarp-runtime, create your own personal\nfork instead of cloning directly. The following will allow\nyou to keep your fork updated with changes to the global repo."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/iowarp-runtime\ngit remote add iowarp https://github.com/iowarp/iowarp-runtime\ngit pull iowarp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"content-transfer-engine-hermes",children:"Content-Transfer-Engine: Hermes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/content-transfer-engine\nscspkg create cte\nmodule unload cte\nmodule load hermes_shm iowarp_runtime\nrm -rf build\nmkdir build\ncd build\ncmake ../ \\\n-DCMAKE_INSTALL_PREFIX=$(scspkg pkg root cte)\nmake -j32 install\n"})}),"\n",(0,r.jsx)(n.p,{children:"NOTE: If you will be working on the cte, create your own personal\nfork instead of cloning directly. The following will allow\nyou to keep your fork updated with changes to the global repo."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ${IOWARP_PKGS}/content-transfer-engine\ngit remote add iowarp https://github.com/iowarp/content-transfer-engine.git\ngit pull iowarp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"another-note-on-environments",children:"Another note on environments"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this installation, you will have the following spack:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"spack load iowarp\n"})}),"\n",(0,r.jsx)(n.p,{children:"And the following modules:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"module load hermes_shm iowarp_runtime cte\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Understanding how your environment works is important. When\ncompiling you must make sure that only the necessary modules\nare loaded. For example, the iowarp_runtime install only\nrequires ",(0,r.jsx)(n.code,{children:"spack load iowarp"})," and ",(0,r.jsx)(n.code,{children:"module load hermes_shm"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have ",(0,r.jsx)(n.code,{children:"module load iowarp_runtime"})," as well,\nthere is a chance the compiler will find header files\nin the module's directory, instead of the build directory.\nThis can lead to compilation errors since the module directory\nwill likely be outdated compared to the code you just wrote."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>t});var o=i(6540);const r={},a=o.createContext(r);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);