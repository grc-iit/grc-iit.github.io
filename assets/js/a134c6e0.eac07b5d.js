"use strict";(self.webpackChunkgrc=self.webpackChunkgrc||[]).push([[91600],{81226:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"jarvis/jarvis-cd/schedulers","title":"Schedulers","description":"Jarvis can be used inside of job specs.","source":"@site/docs/81-jarvis/02-jarvis-cd/11-schedulers.md","sourceDirName":"81-jarvis/02-jarvis-cd","slug":"/jarvis/jarvis-cd/schedulers","permalink":"/docs/jarvis/jarvis-cd/schedulers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Python API","permalink":"/docs/jarvis/jarvis-cd/python-api"},"next":{"title":"CM1","permalink":"/docs/jarvis/jarvis-cd/packages/cm1"}}');var t=s(74848),o=s(28453);const i={},c="Schedulers",a={},d=[{value:"Slurm",id:"slurm",level:2},{value:"PBS",id:"pbs",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"schedulers",children:"Schedulers"})}),"\n",(0,t.jsx)(n.p,{children:"Jarvis can be used inside of job specs."}),"\n",(0,t.jsx)(n.p,{children:"Mainly, Jarvis builds a hostfile and allows users to ensure that jarvis commands execute only on a single node."}),"\n",(0,t.jsx)(n.h2,{id:"slurm",children:"Slurm"}),"\n",(0,t.jsx)(n.p,{children:"Below is an example for slurm:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'#!/bin/bash\n#SBATCH --nodes=2\n#SBATCH --ntasks-per-node=1\n#SBATCH --cpus-per-task=4    # <- match to OMP_NUM_THREADS\n#SBATCH --partition=cpu      # <- or one of: gpuA100x4 gpuA40x4 gpuA100x8 gpuMI100x8\n#SBATCH --account=bekn-delta-cpu    # <- match to a "Project" returned by the "accounts" command\n#SBATCH --job-name=myjobtest\n#SBATCH --time=00:15:00      # hh:mm:ss for the job\n#SBATCH --constraint="scratch"\n#SBATCH -e slurm-%j.err\n#SBATCH -o slurm-%j.out\n### GPU options ###\n##SBATCH --gpus-per-node=4\n##SBATCH --gpu-bind=closest     # <- or closest\n##SBATCH --mail-user=you@yourinstitution.edu\n##SBATCH --mail-type="BEGIN,END" See sbatch or srun man pages for more email options\n\nspack load iowarp\nJARVIS_FIRST=$(jarvis sched hostfile build +slurm_host)\nif [ "$JARVIS_FIRST" -eq 0 ]; then\n    exit 0\nfi\necho "On first node!!!"\n# Any other jarvis commands\n'})}),"\n",(0,t.jsx)(n.h2,{id:"pbs",children:"PBS"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'spack load iowarp\nJARVIS_FIRST=$(jarvis sched hostfile build +pbs_host)\nif [ "$JARVIS_FIRST" -eq 0 ]; then\n    exit 0\nfi\necho "On first node!!!"\n# Any other jarvis commands\n'})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var r=s(96540);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);