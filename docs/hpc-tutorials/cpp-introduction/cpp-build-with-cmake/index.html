<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hpc-tutorials/cpp-introduction/cpp-build-with-cmake" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Building C++ with CMake | Gnosis Research Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://grc.iit.edu/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://grc.iit.edu/img/social-card.png"><meta data-rh="true" property="og:url" content="https://grc.iit.edu/docs/hpc-tutorials/cpp-introduction/cpp-build-with-cmake"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="high-performance computing (hpc), memory and storage systems, scalable software systems, data management, data-centric systems, research center, scalable system software, technology research, computational research, innovative technology, scientific research"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Building C++ with CMake | Gnosis Research Center"><meta data-rh="true" name="description" content="Now that we have seen how to compile C++ code manually, we will discuss"><meta data-rh="true" property="og:description" content="Now that we have seen how to compile C++ code manually, we will discuss"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://grc.iit.edu/docs/hpc-tutorials/cpp-introduction/cpp-build-with-cmake"><link data-rh="true" rel="alternate" href="https://grc.iit.edu/docs/hpc-tutorials/cpp-introduction/cpp-build-with-cmake" hreflang="en"><link data-rh="true" rel="alternate" href="https://grc.iit.edu/docs/hpc-tutorials/cpp-introduction/cpp-build-with-cmake" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Gnosis Research Center RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Gnosis Research Center Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9SXDPLSLB2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9SXDPLSLB2",{})</script>



<link rel="alternate" type="application/rss+xml" href="/newsletter/rss.xml" title="Gnosis Research Center RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/newsletter/atom.xml" title="Gnosis Research Center Atom Feed"><link rel="stylesheet" href="/assets/css/styles.a9d38052.css">
<script src="/assets/js/runtime~main.97d3c19f.js" defer="defer"></script>
<script src="/assets/js/main.bf2833a8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Gnosis Research Center" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Gnosis Research Center" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Gnosis Research Center</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Gnosis</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/about">About</a></li><li><a class="dropdown__link" href="/members">Members</a></li><li><a class="dropdown__link" href="/network">Network</a></li><li><a class="dropdown__link" href="/contact">Contact</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Research</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/research/projects">Projects</a></li><li><a class="dropdown__link" href="/research/patents">Patents</a></li><li><a class="dropdown__link" href="/resources/hardware-overview">Hardware Overview</a></li></ul></div><a class="navbar__item navbar__link" href="/news">News</a><a class="navbar__item navbar__link" href="/publications">Publications</a><a class="navbar__item navbar__link" href="/jobs">Jobs</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/index">Tutorials</a><a href="https://github.com/grc-iit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/index">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/category/linux-introduction">HPC Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/linux-introduction">Linux Introduction</a><button aria-label="Expand sidebar category &#x27;Linux Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/installing-hpc-software">Installing HPC Software</a><button aria-label="Expand sidebar category &#x27;Installing HPC Software&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/important-environment-variables">Important Environment Variables</a><button aria-label="Expand sidebar category &#x27;Important Environment Variables&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/c-introduction">C++ Introduction</a><button aria-label="Collapse sidebar category &#x27;C++ Introduction&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-hello-world">Hello World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-build-manually">Building C++ Code Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-build-with-cmake">Building C++ with CMake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-basic-syntax">C++ Basic Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-style-and-doc">C++ Style and Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-classes">C++ Classes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-refs-and-ptrs">C++ References and Pointers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-data-structures">C++ Data Structures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-singleton">Singleton</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-factory">Factory Design Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/cpp-mixins">Mixins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hpc-tutorials/cpp-introduction/unit-tests">Unit Testing in C++</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/hpc-tutorials/docker/docker-basics">Docker</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/hermes">Hermes</a><button aria-label="Expand sidebar category &#x27;Hermes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chronolog/index">ChronoLog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/jarvis/jarvis-util/index">Jarvis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/ares-research-cluster">Ares Research Cluster</a><button aria-label="Expand sidebar category &#x27;Ares Research Cluster&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/iowarp/iowarp">IoWarp</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">HPC Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/c-introduction"><span itemprop="name">C++ Introduction</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Building C++ with CMake</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Building C++ with CMake</h1></header>
<p>Now that we have seen how to compile C++ code manually, we will discuss
build automation using CMake. Generally, compiling manually is bad
because it&#x27;s difficult for someone to download your repo and just
build it. Building the repo should not be burdensome.</p>
<p>The main objectives of this tutorial are as follows:</p>
<ol>
<li>Describe the structure of a proper C++ repo</li>
<li>Show how to use CMake to compile a C++ repo</li>
<li>Demonstrate how to build a basic CMakeLists.txt</li>
</ol>
<p>We will re-use the example from section 3.2.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/grc-iit/grc-tutorial.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd grc-tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export GRC_TUTORIAL=${PWD}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next perform:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spack install boost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spack load boost</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-c-repo-structure">Basic C++ Repo Structure<a href="#basic-c-repo-structure" class="hash-link" aria-label="Direct link to Basic C++ Repo Structure" title="Direct link to Basic C++ Repo Structure">​</a></h2>
<p>Generally, a C++ repo will contain at least the following directories</p>
<ol>
<li>include: where public header files go</li>
<li>src: where private source and header files go</li>
<li>test: where unit tests go</li>
</ol>
<p>Note: A unit test is just a program which validates the correctness
of some component of your program.</p>
<p>In CMake, build configurations are stored in files called CMakeLists.txt.
In each directory which has source code or contains a directory which
has source code, there should be a file called CMakeLists.txt. The
CMakeLists.txt is responsible for determining which source codes are
used for building a library or executable, dependencies, etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-cmake-project">Building a CMake Project<a href="#building-a-cmake-project" class="hash-link" aria-label="Direct link to Building a CMake Project" title="Direct link to Building a CMake Project">​</a></h2>
<p>To build this project, do the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># CMake will produce a Makefile (in this case)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmake ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use make to build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -j8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>CMake is a build system generator, so it doesn&#x27;t always need to
be a makefile which gets produced. It could also be something
like ninja. But generally it is make on Linux systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="top-level-or-root-cmakeliststxt">Top-Level (or Root) CMakeLists.txt<a href="#top-level-or-root-cmakeliststxt" class="hash-link" aria-label="Direct link to Top-Level (or Root) CMakeLists.txt" title="Direct link to Top-Level (or Root) CMakeLists.txt">​</a></h2>
<p>First we will look at the CMakeLists.txt file in the project&#x27;s root
directory. Generally, the root CMake is responsible for the following:</p>
<ol>
<li>Finding packages (e.g., shared libraries) which are relevant to the build</li>
<li>Defining user configuration options</li>
<li>Setting variables global to the build</li>
<li>Setting compiler flags (e.g., optimization)</li>
</ol>
<p>In this section, we will describe our root <a href="https://github.com/grc-iit/grc-tutorial/blob/main/cpp/03-cpp-build-with-cmake/CMakeLists.txt" target="_blank" rel="noopener noreferrer">CMakeLists.txt</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cmake-preamble">CMake Preamble<a href="#cmake-preamble" class="hash-link" aria-label="Direct link to CMake Preamble" title="Direct link to CMake Preamble">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmake_minimum_required (VERSION 3.10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">project(MyFirstCMake)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set(CMAKE_CXX_STANDARD 17)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we require a minimum of CMake 3.10. This will cause CMake to fail
if the installed version is too old.</p>
<p>We also set the name of this project to be MyFirstCMake. The <em>project</em>
function will set the name of this project and store it in the variable
PROJECT_NAME. Calling from the top-level CMakeLists.txt also stores the project
name in the variable CMAKE_PROJECT_NAME.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="global-compiler-flags">Global Compiler Flags<a href="#global-compiler-flags" class="hash-link" aria-label="Direct link to Global Compiler Flags" title="Direct link to Global Compiler Flags">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Compiler optimization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_compile_options(&quot;-fPIC&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (CMAKE_BUILD_TYPE STREQUAL &quot;Debug&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -O0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elseif(CMAKE_BUILD_TYPE STREQUAL &quot;RelWithDebInfo&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -O2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elseif(CMAKE_BUILD_TYPE STREQUAL &quot;Release&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -03&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -03&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endif()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>CMake defines the following variables automatically:</p>
<ol>
<li>CMAKE_CXX_STANDARD: The C++ version. For now C++17.</li>
<li>CMAKE_BUILD_TYPE: What mode to build your project in. Typically
this indicates compiler optimization. Default is usually RelWithDebInfo</li>
<li>CMAKE_CXX_FLAGS: Flags to pass to the compiler. By default, this
will be equivalent to the CXX_FLAGS environment variable from the
shell CMake gets executed in.</li>
</ol>
<p>In this example, we define four CMAKE_BUILD_TYPES:</p>
<ol>
<li>Debug: no compiler optimization</li>
<li>RelWithDebInfo: moderate compiler optimization</li>
<li>Release: heavy compiler optimization</li>
<li>Everything else: same as Release</li>
</ol>
<p>These build types are very common in CMake projects.</p>
<p>In section 3.2, we mentioned that the -fPIC flag was required when
building a shared library. In CMake this flag can be added to all
libraries as follows:</p>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">add_compile_options(&quot;-fPIC&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For each CMake build type, we also enable different levels of optimization.
For example, with Debug we disabled compiler optimization as follows:</p>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -O0&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Setting CMAKE_CXX_FLAGS and add_compile_options are effectively the same thing.
In this case, it would also be equivalent (and actually encouraged) to write:</p>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">add_compile_options(&quot;-O0&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, in many C++ projects people will set CMAKE_CXX_FLAGS. The main
difference between the two approaches is that CMAKE_CXX_FLAGS will apply
globally, even if set in a lower-level CMakeLists.txt. This is partially due to
historical reasons.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-options">Build Options<a href="#build-options" class="hash-link" aria-label="Direct link to Build Options" title="Direct link to Build Options">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">option(BUILD_TESTING &quot;Build testing kits&quot; OFF)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The option command allows users to configure the build. In this case, we include
a flag which indicates whether or not to build unit tests. In many cases, users
won&#x27;t want to take the time to test code unless there are potential
portability issues. By default, this value is set to OFF. The alternative is to
set it to ON.</p>
<p>CMake options are passed to CMake using the -D flag. To build this project with testing, do the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmake ../ -DBUILD_TESTING=ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -j8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="output-directories">Output Directories<a href="#output-directories" class="hash-link" aria-label="Direct link to Output Directories" title="Direct link to Output Directories">​</a></h3>
<p>In this section, we will describe how to define where CMake should output
executables and shared objects.</p>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Setup CMake Output Directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set(CMAKE_RUNTIME_OUTPUT_DIRECTORY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${CMAKE_BINARY_DIR}/bin CACHE PATH &quot;Single Directory for all Executables.&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set(CMAKE_LIBRARY_OUTPUT_DIRECTORY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${CMAKE_BINARY_DIR}/bin CACHE PATH &quot;Single Directory for all Libraries&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${CMAKE_BINARY_DIR}/bin CACHE PATH &quot;Single Directory for all static libraries.&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>CMAKE_RUNTIME_OUTPUT_DIRECTORY: output for executables</li>
<li>CMAKE_LIBRARY_OUTPUT_DIRECTORY: output for shared libraries</li>
<li>CMAKE_ARCHIVE_OUTPUT_DIRECTORY: output for static libraries (not important for us)</li>
</ul>
<p>CMAKE_BINARY_DIR is automatically provided by CMake. This is the absolute
path to the directory which contains the root CMake. In our case, this would
be <code>cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake</code>.</p>
<p>In this example, we output all executables and shared objects to the bin
directory.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="locating-dependencies">Locating Dependencies<a href="#locating-dependencies" class="hash-link" aria-label="Direct link to Locating Dependencies" title="Direct link to Locating Dependencies">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Dependencies common to all subdirectories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find_package(Boost COMPONENTS system filesystem REQUIRED)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>find_package</em> is used to locate packages installed on the system by parsing the
environment variable CMAKE_PREFIX_PATH. CMAKE_PREFIX_PATH must contain the paths
to .cmake (not .txt) files which actually load the package information. This
variable is often set by spack when loading packages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-testing">Enable Testing<a href="#enable-testing" class="hash-link" aria-label="Direct link to Enable Testing" title="Direct link to Enable Testing">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable Testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">include(CTest)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(CMAKE_PROJECT_NAME STREQUAL MyFirstCMake AND BUILD_TESTING)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_testing()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endif()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code will enable the ability to use a functionality called CTest.
CTests are used for automating unit tests for C++ projects. In our
case, this is only enabled when BUILD_TESTING is ON.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="directory-descent">Directory Descent<a href="#directory-descent" class="hash-link" aria-label="Direct link to Directory Descent" title="Direct link to Directory Descent">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_subdirectory(src)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Testing Sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(CMAKE_PROJECT_NAME STREQUAL MyFirstCMake AND BUILD_TESTING)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  add_subdirectory(test)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endif()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There is no source code in the root directory for this project. In
order to get to the source code, we must go into the src and test
directories. <em>add_subdirectory</em> will tell CMake to go to a specific
directory and execute the CMakeLists.txt in that subdirectory.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="srccmakeliststxt">src/CMakeLists.txt<a href="#srccmakeliststxt" class="hash-link" aria-label="Direct link to src/CMakeLists.txt" title="Direct link to src/CMakeLists.txt">​</a></h2>
<p>In this section, we will discuss <a href="https://github.com/grc-iit/grc-tutorial/blob/main/cpp/03-cpp-build-with-cmake/src/CMakeLists.txt" target="_blank" rel="noopener noreferrer">src/CMakeLists.txt</a>.
This CMake file is responsible for defining how to build + install the
source code in this repo.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="including-header-files">Including Header Files<a href="#including-header-files" class="hash-link" aria-label="Direct link to Including Header Files" title="Direct link to Including Header Files">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Include Header Directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">include_directories(${CMAKE_SOURCE_DIR}/include)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>include_directories</em> will ensure that header files can be discovered
by the C++ compiler. This is analagous to the <code>-I</code> flag in the gcc
compiler. Here we ensure that the compiler will search the directory
<code>${CMAKE_SOURCE_DIR}/include</code> for header files.</p>
<p>CMAKE_SOURCE_DIR is provided automatically by CMake. It represents
the absolute path to the directory containing the root CMakeLists.txt.
In our case, this constant would expand to
<code>cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake/</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-shared-library">Creating a Shared Library<a href="#creating-a-shared-library" class="hash-link" aria-label="Direct link to Creating a Shared Library" title="Direct link to Creating a Shared Library">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build Database (DB) Library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_library(database_lib SHARED ${CMAKE_CURRENT_SOURCE_DIR}/database_lib.cc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target_link_libraries(database_lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${Boost_FILESYSTEM_LIBRARY}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${Boost_SYSTEM_LIBRARY})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>add_library</em> will create a shared library, in this case database_lib. This function takes as
input the path to all source files related to the build. The SHARED indicates
this library is shared (as opposed to static). Here, there is only one source
file, datbase_lib.cc. The output of this command will be &quot;libdatabase_lib.so&quot; in
the <code>build/lib</code> directory.</p>
<p>CMAKE_CURRENT_SOURCE_DIR is provided automatically by CMake. It represents
the absolute path to the directory containing the CMakeLists.txt currently
being processed. In our case, this constant would expand to
<code>cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake/src</code>.</p>
<p><em>target_link_libraries</em> will link all necessary libraries necessary to compile the target database_lib.
This is analagous to the &quot;-l&quot; flag in gcc. In our case, we link against the
Boost System + Filesystem modules. You need to look at specific documentation
for each dependency you include in order to include it!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-executable">Creating an Executable<a href="#creating-an-executable" class="hash-link" aria-label="Direct link to Creating an Executable" title="Direct link to Creating an Executable">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build Grocery DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_executable(grocery_db ${CMAKE_CURRENT_SOURCE_DIR}/grocery_db.cc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_dependencies(grocery_db database_lib)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target_link_libraries(grocery_db database_lib)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build Movies DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_executable(movies_db ${CMAKE_CURRENT_SOURCE_DIR}/movies_db.cc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_dependencies(movies_db database_lib)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target_link_libraries(movies_db database_lib)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>add_executable</em> will create an executable. In our case, the executables
are movies_db and grocery_db.</p>
<p><em>add_dependencies</em> will force certain CMake targets to be built before
others. In this case, we need database_lib to be built before movies_db
and grocery_db.</p>
<p>In this case, <em>target_link_libraries</em> will link database_lib to our executables.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-libraries--executables">Installing Libraries + Executables<a href="#installing-libraries--executables" class="hash-link" aria-label="Direct link to Installing Libraries + Executables" title="Direct link to Installing Libraries + Executables">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Add libraries + executables to CMake install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TARGETS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        database_lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        grocery_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        movies_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LIBRARY DESTINATION ${CMAKE_INSTALL_PREFIX}/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ARCHIVE DESTINATION ${CMAKE_INSTALL_PREFIX}/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>install</em> defines what happens when a user calls &quot;make install&quot;. In this
case we specify that our targets database_lib, grocery_db, and movies_db
should be installed into one of <code>LIBRARY</code>, <code>ARCHIVE</code>, or <code>RUNTIME</code> depending
on its type. For example, database_lib will be installed to LIBRARY
(since we used add_library), whereas grocery_db and movies_db will be installed
to <code>RUNTIME</code> (since we used add_executable).</p>
<p><code>CMAKE_INSTALL_PREFIX</code> is a constant provided by CMake which represents
where files should be installed. This can be configured by users by passing
<code>-DCMAKE_INSTALL_PREFIX</code> to their CMake build. By default, the value of this
constant is /usr.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-header-files">Installing Header Files<a href="#installing-header-files" class="hash-link" aria-label="Direct link to Installing Header Files" title="Direct link to Installing Header Files">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Add header file(s) to CMake Install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#-----------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FILES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${CMAKE_SOURCE_DIR}/include/database_lib.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DESTINATION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ${CMAKE_INSTALL_PREFIX}/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        COMPONENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        headers)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, we use <em>install</em> to specify
that the specific file <code>${CMAKE_SOURCE_DIR}/include/database_lib.h</code> should be
installed to <code>${CMAKE_INSTALL_PREFIX}/include</code>. Here, we use the keyword
FILES instead of the keyword TARGET. Targets are defined using a CMake
function such as add_executable or add_library. Files are just the way
they are with no modification.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testcmakeliststxt">test/CMakeLists.txt<a href="#testcmakeliststxt" class="hash-link" aria-label="Direct link to test/CMakeLists.txt" title="Direct link to test/CMakeLists.txt">​</a></h2>
<p>In this section, we will discuss <a href="https://github.com/grc-iit/grc-tutorial/blob/main/cpp/03-cpp-build-with-cmake/test/CMakeLists.txt" target="_blank" rel="noopener noreferrer">test/CMakeLists.txt</a>. This CMake is responsible for creating unit tests.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-ctest">Creating a CTest<a href="#creating-a-ctest" class="hash-link" aria-label="Direct link to Creating a CTest" title="Direct link to Creating a CTest">​</a></h3>
<div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">add_test(test_grocery_db COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/grocery_db)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_property(TEST test_grocery_db PROPERTY ENVIRONMENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;LD_LIBRARY_PATH=${CMAKE_LIBRARY_OUTPUT_DIRECTORY}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add_test(test_movies_db COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/movies_db)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_property(TEST test_movies_db PROPERTY ENVIRONMENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;LD_LIBRARY_PATH=${CMAKE_LIBRARY_OUTPUT_DIRECTORY}&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>add_test</em> creates a CTest case. Here we create two tests: test_grocery_db
and test_movies_db. The test will execute the command <code>${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/grocery_db</code>.</p>
<p>CMAKE_RUNTIME_OUTPUT_DIRECTORY is a constant provided by CMake. It
is the location where an executable is installed after performing the
&quot;make&quot; command.</p>
<p><em>set_property</em> sets some sort of property about a target. In this
case the target is the test case test_movies_db. We are setting
an environment variable <code>LD_LIBRARY_PATH</code>. From section 3.2, we
saw that we needed to be very careful about ensuring the OS
knows where shared libraries are located. In this case, we
ensure the OS will check the path <code>${CMAKE_LIBRARY_OUTPUT_DIRECTORY}</code>.</p>
<p>CMAKE_LIBRARY_OUTPUT_DIRECTORY is a constant provided by CMake. It
is the location where a shared library is installed after performing
the &quot;make&quot; command.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="putting-it-all-together">Putting it All Together<a href="#putting-it-all-together" class="hash-link" aria-label="Direct link to Putting it All Together" title="Direct link to Putting it All Together">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmake ../ -DBUILD_TESTING=ON -DCMAKE_INSTALL_PREFIX=../install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -j8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ctest -VV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above code will build, test, and install this example project.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="generating-a-makefile">Generating a Makefile<a href="#generating-a-makefile" class="hash-link" aria-label="Direct link to Generating a Makefile" title="Direct link to Generating a Makefile">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmake ../ -DBUILD_TESTING=ON -DCMAKE_INSTALL_PREFIX=../install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we generate a Makefile. The Makefile is used to actually compile
source code. Here CMake will create a Makefile which will compile
unit tests and install data to this tutorial&#x27;s install directory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="building-with-make">Building with Make<a href="#building-with-make" class="hash-link" aria-label="Direct link to Building with Make" title="Direct link to Building with Make">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make -j8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will build with 8 threads (-j indicates parallelism). In our
case, it will place all shared libraries and executables underneath the
&quot;bin&quot; directory.</p>
<p>Just to make sure, list the bin directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output should be as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grocery_db  libdatabase_lib.so  movies_db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-unit-tests">Running the Unit Tests<a href="#running-the-unit-tests" class="hash-link" aria-label="Direct link to Running the Unit Tests" title="Direct link to Running the Unit Tests">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ctest -VV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will run unit tests verbosely, meaning that terminal outputs
will not be hidden. -VV indicates making the tests verbose</p>
<p>You should see something like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">UpdateCTestConfiguration  from :/home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/DartConfiguration.tcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parse Config file:/home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/DartConfiguration.tcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UpdateCTestConfiguration  from :/home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/DartConfiguration.tcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parse Config file:/home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/DartConfiguration.tcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test project /home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Constructing a list of tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done constructing a list of tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Updating test list for fixtures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Added 0 tests to meet fixture requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking test dependency graph...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking test dependency graph end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Start 1: test_grocery_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: Test command: /home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/bin/grocery_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: Working Directory: /home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: Environment variables: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1:  LD_LIBRARY_PATH=/home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: Test timeout computed to be: 1500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: grocery: in create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: grocery: in read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: grocery: in update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: grocery: in delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1/2 Test #1: test_grocery_db ..................   Passed    0.00 sec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Start 2: test_movies_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: Test command: /home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/bin/movies_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: Working Directory: /home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: Environment variables: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2:  LD_LIBRARY_PATH=/home/luke/Documents/Projects/grc-tutorial/cpp/03-cpp-build-with-cmake/build/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: Test timeout computed to be: 1500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: movies: in create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: movies: in read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: movies: in update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: movies: in delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2/2 Test #2: test_movies_db ...................   Passed    0.00 sec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100% tests passed, 0 tests failed out of 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total Test time (real) =   0.01 sec</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing">Installing<a href="#installing" class="hash-link" aria-label="Direct link to Installing" title="Direct link to Installing">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will create the directories bin, lib, and include in the install
directory we created.</p>
<ol>
<li>bin: all executables</li>
<li>lib: all shared libararies</li>
<li>include: all header files</li>
</ol>
<p>Let&#x27;s list the contents of the install directory and its subdirectories</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ${GRC_TUTORIAL}/cpp/03-cpp-build-with-cmake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find install/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output should look like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">install/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install/bin/grocery_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install/bin/movies_db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install/include/database_lib.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install/lib/libdatabase_lib.so</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/hpc-tutorials/cpp-introduction/cpp-build-manually"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Building C++ Code Manually</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/hpc-tutorials/cpp-introduction/cpp-basic-syntax"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">C++ Basic Syntax</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#basic-c-repo-structure" class="table-of-contents__link toc-highlight">Basic C++ Repo Structure</a></li><li><a href="#building-a-cmake-project" class="table-of-contents__link toc-highlight">Building a CMake Project</a></li><li><a href="#top-level-or-root-cmakeliststxt" class="table-of-contents__link toc-highlight">Top-Level (or Root) CMakeLists.txt</a><ul><li><a href="#cmake-preamble" class="table-of-contents__link toc-highlight">CMake Preamble</a></li><li><a href="#global-compiler-flags" class="table-of-contents__link toc-highlight">Global Compiler Flags</a></li><li><a href="#build-options" class="table-of-contents__link toc-highlight">Build Options</a></li><li><a href="#output-directories" class="table-of-contents__link toc-highlight">Output Directories</a></li><li><a href="#locating-dependencies" class="table-of-contents__link toc-highlight">Locating Dependencies</a></li><li><a href="#enable-testing" class="table-of-contents__link toc-highlight">Enable Testing</a></li><li><a href="#directory-descent" class="table-of-contents__link toc-highlight">Directory Descent</a></li></ul></li><li><a href="#srccmakeliststxt" class="table-of-contents__link toc-highlight">src/CMakeLists.txt</a><ul><li><a href="#including-header-files" class="table-of-contents__link toc-highlight">Including Header Files</a></li><li><a href="#creating-a-shared-library" class="table-of-contents__link toc-highlight">Creating a Shared Library</a></li><li><a href="#creating-an-executable" class="table-of-contents__link toc-highlight">Creating an Executable</a></li><li><a href="#installing-libraries--executables" class="table-of-contents__link toc-highlight">Installing Libraries + Executables</a></li><li><a href="#installing-header-files" class="table-of-contents__link toc-highlight">Installing Header Files</a></li></ul></li><li><a href="#testcmakeliststxt" class="table-of-contents__link toc-highlight">test/CMakeLists.txt</a><ul><li><a href="#creating-a-ctest" class="table-of-contents__link toc-highlight">Creating a CTest</a></li><li><a href="#putting-it-all-together" class="table-of-contents__link toc-highlight">Putting it All Together</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Gnosis Research Center</div><ul class="footer__items clean-list"><li class="footer__item">
                  <p>
                    Stuart Building <br>
                    Room 112i and 010 <br>
                    10 W. 31st Street <br>
                    Chicago, Illinois 60616
                  </p>
                </li><li class="footer__item">
                  <p>
                    Email: <a href="mailto:grc@iit.edu" target="_blank" rel="noopener noreferrer">grc@iit.edu</a> <br>
                    Phone: <a href="tel:3125676885" target="_blank" rel="noopener noreferrer">+1 312 567 6885</a>
                  </p>
                </li></ul></div><div class="col footer__col"><div class="footer__title">Featured Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/research/projects/chronolog">ChronoLog</a></li><li class="footer__item"><a class="footer__link-item" href="/research/projects/labios">Labios</a></li><li class="footer__item"><a class="footer__link-item" href="/research/projects/coeus">Coeus</a></li><li class="footer__item"><a class="footer__link-item" href="/research/projects/hermes">Hermes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tutorials</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/linux-introduction">Linux Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/installing-hpc-software">Installing HPC Software</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/important-environment-variables">Important Environment Variables</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/c-introduction">C++ Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/ares-research-cluster">Ares User Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/grc-iit" target="_blank" rel="noopener noreferrer" class="footer__link-item">GRC GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/gnosis-research-center/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GRC LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/grc_iit" target="_blank" rel="noopener noreferrer" class="footer__link-item">GRC X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCNtEyAt4_ckpIbX-gSv8sww" target="_blank" rel="noopener noreferrer" class="footer__link-item">GRC YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.iit.edu/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Illinois Tech<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://cs.iit.edu/~scs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SCS Lab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Gnosis Research Center (GRC).</div></div></div></footer></div>
</body>
</html>